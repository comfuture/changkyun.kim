<!DOCTYPE html><html  lang="ko" data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>microk8s 에서 letsencrypt 인증서 사용하기</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
<style>*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-bottom:1.2em;margin-top:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);font-weight:500;text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-bottom:1.25em;margin-top:1.25em;padding-inline-start:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-bottom:1.25em;margin-top:1.25em;padding-inline-start:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-counters);font-weight:400}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-bottom:3em;margin-top:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){border-inline-start-color:var(--tw-prose-quote-borders);border-inline-start-width:.25rem;color:var(--tw-prose-quotes);font-style:italic;font-weight:500;margin-bottom:1.6em;margin-top:1.6em;padding-inline-start:1em;quotes:"“""”""‘""’"}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:2.25em;font-weight:800;line-height:1.1111111;margin-bottom:.8888889em;margin-top:0}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:900}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.5em;font-weight:700;line-height:1.3333333;margin-bottom:1em;margin-top:2em}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:800}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.25em;font-weight:600;line-height:1.6;margin-bottom:.6em;margin-top:1.6em}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;line-height:1.5;margin-bottom:.5em;margin-top:1.5em}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-bottom:2em;margin-top:2em}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.3125rem;box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows)/10%),0 3px rgb(var(--tw-prose-kbd-shadows)/10%);color:var(--tw-prose-kbd);font-family:inherit;font-size:.875em;font-weight:500;padding-inline-end:.375em;padding-bottom:.1875em;padding-top:.1875em;padding-inline-start:.375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-size:.875em;font-weight:600}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:var(--tw-prose-pre-bg);border-radius:.375rem;color:var(--tw-prose-pre-code);font-size:.875em;font-weight:400;line-height:1.7142857;margin-bottom:1.7142857em;margin-top:1.7142857em;overflow-x:auto;padding-inline-end:1.1428571em;padding-bottom:.8571429em;padding-top:.8571429em;padding-inline-start:1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-radius:0;border-width:0;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em;line-height:1.7142857;margin-bottom:2em;margin-top:2em;table-layout:auto;width:100%}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-th-borders);border-bottom-width:1px}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em;vertical-align:bottom}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-td-borders);border-bottom-width:1px}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-color:var(--tw-prose-th-borders);border-top-width:1px}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgba(0,0,0,.5);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.5em;margin-top:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-top:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border-width:0;white-space:nowrap}.absolute{position:absolute}.sticky{position:sticky}.top-\[-1px\]{top:-1px}.z-0{z-index:0}.-m-16{margin:-4rem}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-3{margin-bottom:.75rem;margin-top:.75rem}.my-4{margin-top:1rem}.mb-4,.my-4{margin-bottom:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.hidden{display:none}.h-32{height:8rem}.h-6{height:1.5rem}.h-\[300px\]{height:300px}.h-\[56px\]{height:56px}.max-h-96{max-height:24rem}.w-32{width:8rem}.w-6{width:1.5rem}.w-full{width:100%}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-center{justify-content:center}.justify-items-stretch{justify-items:stretch}.gap-2{gap:.5rem}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-none{border-style:none}.border-blue-300{--tw-border-opacity:1;border-color:rgb(147 197 253/var(--tw-border-opacity,1))}.border-blue-500{--tw-border-opacity:1;border-color:rgb(59 130 246/var(--tw-border-opacity,1))}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity,1))}.bg-blue-100{--tw-bg-opacity:1;background-color:rgb(219 234 254/var(--tw-bg-opacity,1))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity,1))}.bg-gray-600{--tw-bg-opacity:1;background-color:rgb(75 85 99/var(--tw-bg-opacity,1))}.bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity,1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.bg-white\/40{background-color:#fff6}.bg-white\/60{background-color:#fff9}.fill-current{fill:currentColor}.object-cover{-o-object-fit:cover;object-fit:cover}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.py-10{padding-bottom:2.5rem;padding-top:2.5rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-4{padding-bottom:1rem;padding-top:1rem}.pt-24{padding-top:6rem}.text-center{text-align:center}.align-middle{vertical-align:middle}.text-2xl{font-size:1.5rem;line-height:2rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.leading-relaxed{line-height:1.625}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81/var(--tw-text-opacity,1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55/var(--tw-text-opacity,1))}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.shadow,.shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.dark\:prose-invert:is(.dark *){--tw-prose-body:var(--tw-prose-invert-body);--tw-prose-headings:var(--tw-prose-invert-headings);--tw-prose-lead:var(--tw-prose-invert-lead);--tw-prose-links:var(--tw-prose-invert-links);--tw-prose-bold:var(--tw-prose-invert-bold);--tw-prose-counters:var(--tw-prose-invert-counters);--tw-prose-bullets:var(--tw-prose-invert-bullets);--tw-prose-hr:var(--tw-prose-invert-hr);--tw-prose-quotes:var(--tw-prose-invert-quotes);--tw-prose-quote-borders:var(--tw-prose-invert-quote-borders);--tw-prose-captions:var(--tw-prose-invert-captions);--tw-prose-kbd:var(--tw-prose-invert-kbd);--tw-prose-kbd-shadows:var(--tw-prose-invert-kbd-shadows);--tw-prose-code:var(--tw-prose-invert-code);--tw-prose-pre-code:var(--tw-prose-invert-pre-code);--tw-prose-pre-bg:var(--tw-prose-invert-pre-bg);--tw-prose-th-borders:var(--tw-prose-invert-th-borders);--tw-prose-td-borders:var(--tw-prose-invert-td-borders)}@media (min-width:768px){.md\:prose-lg{font-size:1.125rem;line-height:1.7777778}.md\:prose-lg :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em;margin-top:1.3333333em}.md\:prose-lg :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.2222222em;line-height:1.4545455;margin-bottom:1.0909091em;margin-top:1.0909091em}.md\:prose-lg :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.6666667em;margin-top:1.6666667em;padding-inline-start:1em}.md\:prose-lg :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:2.6666667em;line-height:1;margin-bottom:.8333333em;margin-top:0}.md\:prose-lg :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.6666667em;line-height:1.3333333;margin-bottom:1.0666667em;margin-top:1.8666667em}.md\:prose-lg :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.3333333em;line-height:1.5;margin-bottom:.6666667em;margin-top:1.6666667em}.md\:prose-lg :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){line-height:1.5555556;margin-bottom:.4444444em;margin-top:1.7777778em}.md\:prose-lg :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.7777778em;margin-top:1.7777778em}.md\:prose-lg :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.7777778em;margin-top:1.7777778em}.md\:prose-lg :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.md\:prose-lg :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.7777778em;margin-top:1.7777778em}.md\:prose-lg :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.3125rem;font-size:.8888889em;padding-inline-end:.4444444em;padding-bottom:.2222222em;padding-top:.2222222em;padding-inline-start:.4444444em}.md\:prose-lg :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em}.md\:prose-lg :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8666667em}.md\:prose-lg :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em}.md\:prose-lg :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.375rem;font-size:.8888889em;line-height:1.75;margin-bottom:2em;margin-top:2em;padding-inline-end:1.5em;padding-bottom:1em;padding-top:1em;padding-inline-start:1.5em}.md\:prose-lg :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em;margin-top:1.3333333em;padding-inline-start:1.5555556em}.md\:prose-lg :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em;margin-top:1.3333333em;padding-inline-start:1.5555556em}.md\:prose-lg :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.6666667em;margin-top:.6666667em}.md\:prose-lg :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4444444em}.md\:prose-lg :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4444444em}.md\:prose-lg :where(.md\:prose-lg>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.8888889em;margin-top:.8888889em}.md\:prose-lg :where(.md\:prose-lg>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}.md\:prose-lg :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.8888889em;margin-top:.8888889em}.md\:prose-lg :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em;margin-top:1.3333333em}.md\:prose-lg :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.md\:prose-lg :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6666667em;padding-inline-start:1.5555556em}.md\:prose-lg :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:3.1111111em;margin-top:3.1111111em}.md\:prose-lg :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.5}.md\:prose-lg :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.75em;padding-bottom:.75em;padding-inline-start:.75em}.md\:prose-lg :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.md\:prose-lg :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.md\:prose-lg :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.75em;padding-bottom:.75em;padding-top:.75em;padding-inline-start:.75em}.md\:prose-lg :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.md\:prose-lg :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.md\:prose-lg :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.7777778em;margin-top:1.7777778em}.md\:prose-lg :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.md\:prose-lg :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.5;margin-top:1em}.md\:prose-lg :where(.md\:prose-lg>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(.md\:prose-lg>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}}.dark\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity,1))}.dark\:bg-gray-600:is(.dark *){--tw-bg-opacity:1;background-color:rgb(75 85 99/var(--tw-bg-opacity,1))}.dark\:bg-gray-600\/40:is(.dark *){background-color:#4b556366}.dark\:bg-gray-800:is(.dark *){--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity,1))}.dark\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity,1))}@media (min-width:768px){.md\:relative{position:relative}.md\:mx-auto{margin-left:auto;margin-right:auto}.md\:-mt-16{margin-top:-4rem}.md\:mt-0{margin-top:0}.md\:flex{display:flex}.md\:hidden{display:none}.md\:h-48{height:12rem}.md\:max-h-\[400px\]{max-height:400px}.md\:w-10\/12{width:83.333333%}.md\:w-48{width:12rem}.md\:flex-row{flex-direction:row}.md\:rounded-lg{border-radius:.5rem}.md\:border-0{border-width:0}.md\:bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity,1))}.md\:bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.md\:px-0{padding-left:0;padding-right:0}.md\:pt-16{padding-top:4rem}.md\:opacity-100{opacity:1}.md\:shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.md\:shadow-lg,.md\:shadow-none{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.md\:shadow-none{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000}.md\:dark\:bg-gray-800:is(.dark *){--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity,1))}}@media (min-width:1280px){.xl\:w-8\/12{width:66.666667%}}</style>
<style>.material-symbols-outlined{font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 48;vertical-align:middle}.page-enter-active,.page-leave-active{transition:opacity .35s}.page-enter-from,.page-leave-to{opacity:0}body{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}body:is(.dark *){--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity,1));--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity,1))}.site{display:flex;flex-direction:column;justify-items:stretch;min-height:100vh}.site>header{background-color:#fff9;height:56px;padding:1rem;position:sticky;top:-1px;z-index:50;--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);--tw-backdrop-blur:blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.site>header:is(.dark *){background-color:#4b556366}.site>header .container{display:flex;justify-content:space-between;margin-left:auto;margin-right:auto}.site>header .container h1{font-weight:600;text-transform:uppercase}.site>header .container nav{align-items:flex-end;display:flex;flex-direction:column;gap:.5rem}.site>header .container nav menu{border-radius:.25rem;border-width:1px;margin-top:1.5rem;padding:1rem 2rem;position:absolute;--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);display:none}@media (min-width:768px){.site>header .container nav menu{border-width:0;margin-top:0;padding:0;position:relative;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}}.site>header .container nav menu{flex-direction:column;gap:.5rem}@media (min-width:768px){.site>header .container nav menu{display:flex;flex-direction:row;gap:1rem;opacity:1}}.site>header .container nav menu{font-size:.875rem;font-weight:600;line-height:1.25rem;text-transform:uppercase;--tw-text-opacity:1;color:rgb(55 65 81/var(--tw-text-opacity,1))}.site>header .container nav menu:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity,1))}.site>header .container nav button.active.hamburger+menu{display:flex;--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1));transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.site>main{flex-grow:1}.site>footer{border-top-width:1px;--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity,1));padding:1rem}.site>footer:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity,1))}.site>footer .container{margin-left:auto;margin-right:auto}</style>
<style>button.hamburger{display:inline-block}@media (min-width:768px){button.hamburger{display:none}}</style>
<style>article.container{margin-left:auto;margin-right:auto;max-width:42rem}article.container img.cover{width:100%}article.container>header h1{font-size:1.25rem;font-weight:700;line-height:1.75rem;margin-bottom:.5rem;margin-top:.5rem}article.container .body{color:var(--tw-prose-body);max-width:65ch}article.container .body :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}article.container .body :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-bottom:1.2em;margin-top:1.2em}article.container .body :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);font-weight:500;text-decoration:underline}article.container .body :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}article.container .body :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}article.container .body :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}article.container .body :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}article.container .body :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-bottom:1.25em;margin-top:1.25em;padding-inline-start:1.625em}article.container .body :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}article.container .body :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}article.container .body :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}article.container .body :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}article.container .body :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}article.container .body :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}article.container .body :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}article.container .body :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}article.container .body :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}article.container .body :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-bottom:1.25em;margin-top:1.25em;padding-inline-start:1.625em}article.container .body :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-counters);font-weight:400}article.container .body :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}article.container .body :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}article.container .body :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-bottom:3em;margin-top:3em}article.container .body :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){border-inline-start-color:var(--tw-prose-quote-borders);border-inline-start-width:.25rem;color:var(--tw-prose-quotes);font-style:italic;font-weight:500;margin-bottom:1.6em;margin-top:1.6em;padding-inline-start:1em;quotes:"“""”""‘""’"}article.container .body :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}article.container .body :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}article.container .body :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:2.25em;font-weight:800;line-height:1.1111111;margin-bottom:.8888889em;margin-top:0}article.container .body :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:900}article.container .body :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.5em;font-weight:700;line-height:1.3333333;margin-bottom:1em;margin-top:2em}article.container .body :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:800}article.container .body :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.25em;font-weight:600;line-height:1.6;margin-bottom:.6em;margin-top:1.6em}article.container .body :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}article.container .body :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;line-height:1.5;margin-bottom:.5em;margin-top:1.5em}article.container .body :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}article.container .body :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}article.container .body :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-bottom:2em;margin-top:2em}article.container .body :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}article.container .body :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.3125rem;box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows)/10%),0 3px rgb(var(--tw-prose-kbd-shadows)/10%);color:var(--tw-prose-kbd);font-family:inherit;font-size:.875em;font-weight:500;padding-inline-end:.375em;padding-bottom:.1875em;padding-top:.1875em;padding-inline-start:.375em}article.container .body :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-size:.875em;font-weight:600}article.container .body :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}article.container .body :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}article.container .body :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}article.container .body :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}article.container .body :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}article.container .body :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}article.container .body :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}article.container .body :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}article.container .body :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}article.container .body :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:var(--tw-prose-pre-bg);border-radius:.375rem;color:var(--tw-prose-pre-code);font-size:.875em;font-weight:400;line-height:1.7142857;margin-bottom:1.7142857em;margin-top:1.7142857em;overflow-x:auto;padding-inline-end:1.1428571em;padding-bottom:.8571429em;padding-top:.8571429em;padding-inline-start:1.1428571em}article.container .body :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-radius:0;border-width:0;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}article.container .body :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}article.container .body :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}article.container .body :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em;line-height:1.7142857;margin-bottom:2em;margin-top:2em;table-layout:auto;width:100%}article.container .body :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-th-borders);border-bottom-width:1px}article.container .body :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em;vertical-align:bottom}article.container .body :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-td-borders);border-bottom-width:1px}article.container .body :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}article.container .body :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}article.container .body :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-color:var(--tw-prose-th-borders);border-top-width:1px}article.container .body :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}article.container .body :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}article.container .body :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}article.container .body :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}article.container .body{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgba(0,0,0,.5);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}article.container .body :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}article.container .body :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.5em;margin-top:.5em}article.container .body :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}article.container .body :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}article.container .body :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}article.container .body :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}article.container .body :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}article.container .body :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}article.container .body :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}article.container .body :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}article.container .body :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}article.container .body :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}article.container .body :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}article.container .body :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}article.container .body :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-top:.5714286em;padding-inline-start:.5714286em}article.container .body :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}article.container .body :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}article.container .body :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}article.container .body :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}article.container .body{line-height:1.625;padding:1rem}@media (min-width:768px){article.container .body{font-size:1.125rem;line-height:1.7777778}article.container .body :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em;margin-top:1.3333333em}article.container .body :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.2222222em;line-height:1.4545455;margin-bottom:1.0909091em;margin-top:1.0909091em}article.container .body :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.6666667em;margin-top:1.6666667em;padding-inline-start:1em}article.container .body :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:2.6666667em;line-height:1;margin-bottom:.8333333em;margin-top:0}article.container .body :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.6666667em;line-height:1.3333333;margin-bottom:1.0666667em;margin-top:1.8666667em}article.container .body :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.3333333em;line-height:1.5;margin-bottom:.6666667em;margin-top:1.6666667em}article.container .body :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){line-height:1.5555556;margin-bottom:.4444444em;margin-top:1.7777778em}article.container .body :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.7777778em;margin-top:1.7777778em}article.container .body :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.7777778em;margin-top:1.7777778em}article.container .body :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}article.container .body :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.7777778em;margin-top:1.7777778em}article.container .body :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.3125rem;font-size:.8888889em;padding-inline-end:.4444444em;padding-bottom:.2222222em;padding-top:.2222222em;padding-inline-start:.4444444em}article.container .body :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em}article.container .body :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8666667em}article.container .body :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em}article.container .body :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.375rem;font-size:.8888889em;line-height:1.75;margin-bottom:2em;margin-top:2em;padding-inline-end:1.5em;padding-bottom:1em;padding-top:1em;padding-inline-start:1.5em}article.container .body :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em;margin-top:1.3333333em;padding-inline-start:1.5555556em}article.container .body :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em;margin-top:1.3333333em;padding-inline-start:1.5555556em}article.container .body :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.6666667em;margin-top:.6666667em}article.container .body :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4444444em}article.container .body :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4444444em}article.container .body :where(.md\:prose-lg>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.8888889em;margin-top:.8888889em}article.container .body :where(.md\:prose-lg>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}article.container .body :where(.md\:prose-lg>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}article.container .body :where(.md\:prose-lg>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}article.container .body :where(.md\:prose-lg>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}article.container .body :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.8888889em;margin-top:.8888889em}article.container .body :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em;margin-top:1.3333333em}article.container .body :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}article.container .body :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6666667em;padding-inline-start:1.5555556em}article.container .body :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:3.1111111em;margin-top:3.1111111em}article.container .body :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.5}article.container .body :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.75em;padding-bottom:.75em;padding-inline-start:.75em}article.container .body :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}article.container .body :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}article.container .body :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.75em;padding-bottom:.75em;padding-top:.75em;padding-inline-start:.75em}article.container .body :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}article.container .body :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}article.container .body :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.7777778em;margin-top:1.7777778em}article.container .body :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}article.container .body :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.5;margin-top:1em}article.container .body :where(.md\:prose-lg>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}article.container .body :where(.md\:prose-lg>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}}article.container .body:is(.dark *){--tw-prose-body:var(--tw-prose-invert-body);--tw-prose-headings:var(--tw-prose-invert-headings);--tw-prose-lead:var(--tw-prose-invert-lead);--tw-prose-links:var(--tw-prose-invert-links);--tw-prose-bold:var(--tw-prose-invert-bold);--tw-prose-counters:var(--tw-prose-invert-counters);--tw-prose-bullets:var(--tw-prose-invert-bullets);--tw-prose-hr:var(--tw-prose-invert-hr);--tw-prose-quotes:var(--tw-prose-invert-quotes);--tw-prose-quote-borders:var(--tw-prose-invert-quote-borders);--tw-prose-captions:var(--tw-prose-invert-captions);--tw-prose-kbd:var(--tw-prose-invert-kbd);--tw-prose-kbd-shadows:var(--tw-prose-invert-kbd-shadows);--tw-prose-code:var(--tw-prose-invert-code);--tw-prose-pre-code:var(--tw-prose-invert-pre-code);--tw-prose-pre-bg:var(--tw-prose-invert-pre-bg);--tw-prose-th-borders:var(--tw-prose-invert-th-borders);--tw-prose-td-borders:var(--tw-prose-invert-td-borders)}article.container .body h2 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))),article.container .body h3 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))),article.container .body h4 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))){text-decoration-line:none}article.container .body pre{background-color:rgb(55 65 81/var(--tw-bg-opacity,1));margin-bottom:1rem;margin-top:1rem;overflow-x:auto;padding:1rem}article.container .body :not(pre)>code,article.container .body pre{border-radius:.25rem;--tw-bg-opacity:1}article.container .body :not(pre)>code{background-color:rgb(229 231 235/var(--tw-bg-opacity,1));padding:.25rem .5rem;word-break:break-all}article.container .body :not(pre)>code:is(.dark *){--tw-bg-opacity:1;background-color:rgb(75 85 99/var(--tw-bg-opacity,1))}article.container .body code:after,article.container .body code:before{display:none}article.container .body code[lang]{--tw-bg-opacity:1;background-color:rgb(75 85 99/var(--tw-bg-opacity,1));font-weight:400}article.container .body section.footnotes{margin-top:2rem}article.container .tags{display:flex;gap:.5rem}article.container .tags li{border-radius:.25rem;border-width:1px;--tw-border-opacity:1;border-color:rgb(147 197 253/var(--tw-border-opacity,1));--tw-bg-opacity:1;background-color:rgb(219 234 254/var(--tw-bg-opacity,1));padding-left:.5rem;padding-right:.5rem}article.container .tags li:before{content:"#"}</style>
<style>pre code .line{display:block}</style>
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C5C27nRP.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CggDTUjA.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C-Zyynjc.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BxVzE-PR.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B85PT2wF.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B9NA5fhz.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/o5n_bVyr.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BCUbSYe6.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dhs5ZqF9.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DWb9ltmV.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BIkxpzLt.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BIhN3KLn.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BD80SQQ5.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/NV2JX2o6.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/5vwZ16tV.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/D98kK3HO.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/BmQdP15E.js">
<meta name="theme-color" content="#FFF">
<meta name="mobile-web-app-capable" content="yes">
<meta property="og:type" content="website">
<meta property="og:title" content="Changkyun Kim">
<meta property="og:site_name" content="Changkyun Kim">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="shortcut icon" href="/favicon.ico">
<meta name="description" content="오라클 프리티어 클라우드에 무료 k8s 클러스터 만들기 에 이어, k8s에 올리는 웹서비스들에 letsencrypt 인증서를 사용하는 과정을 진행했습니다.">
<script type="module" src="/_nuxt/C5C27nRP.js" crossorigin></script>
<script id="unhead:payload" type="application/json">{"title":"Changkyun Kim"}</script>
<link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/81dd48f5-054f-4fcb-90d6-55c08acaf384.json"></head><body><div id="__nuxt"><div class="site"><header><div class="container"><h1><a href="/" class="">Changkyun Kim</a></h1><nav><button class="hamburger"><span class="sr-only">Menu</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><menu><li><a href="/about" class="">About me</a></li><li><a href="/blog/" class="">Articles</a></li><li><a href="/contact" class="">Contact</a></li></menu></nav></div></header><!--[--><article class="container mx-auto"><!----><header><h1>microk8s 에서 letsencrypt 인증서 사용하기</h1><time datetime="datetime">2022년 7월 7일 목요일</time><div class="tags"><ul class="flex gap-2"><!--[--><li>oracle cloud</li><li>k8s</li><li>microk8s</li><!--]--></ul></div></header><div class="body"><div><p><!--[--><a href="https://changkyun.kim/article/2022-05/12-free-k8s-cluster-on-oracle-cloud" rel="nofollow"><!--[-->오라클 프리티어 클라우드에 무료 k8s 클러스터 만들기<!--]--></a> 에 이어, k8s에 올리는 웹서비스들에 letsencrypt 인증서를 사용하는 과정을 진행했습니다.<!--]--></p><p><!--[-->보통 nginx 라면 certbot 등을 이용하면 되겠지만, k8s 에서는 cert-manager 를 이용해야만 합니다.<!--]--></p><pre class="language-bash shiki shiki-themes github-dark-dimmed" style=""><!--[--><code><span class="line" line="1"><span class="skFXu">$</span><span class="s6sc0"> helm</span><span class="s6sc0"> repo</span><span class="s6sc0"> add</span><span class="s6sc0"> jetstack</span><span class="s6sc0"> https://charts.jetstack.io
</span></span><span class="line" line="2"><span class="skFXu">$</span><span class="s6sc0"> helm</span><span class="s6sc0"> repo</span><span class="s6sc0"> update
</span></span><span class="line" line="3"><span class="skFXu">$</span><span class="s6sc0"> kubectl</span><span class="s6sc0"> apply</span><span class="sSMXU"> -f</span><span class="s6sc0"> https://github.com/cert-manager/cert-manager/releases/download/v1.8.2/cert-manager.crds.yaml
</span></span><span class="line" line="4"><span class="skFXu">$</span><span class="s6sc0"> helm</span><span class="s6sc0"> install</span><span class="s3aqa"> \
</span></span><span class="line" line="5"><span class="s6sc0">  cert-manager</span><span class="s6sc0"> jetstack/cert-manager</span><span class="s3aqa"> \
</span></span><span class="line" line="6"><span class="sSMXU">  --namespace</span><span class="s6sc0"> cert-manager</span><span class="s3aqa"> \
</span></span><span class="line" line="7"><span class="sSMXU">  --create-namespace</span><span class="s3aqa"> \
</span></span><span class="line" line="8"><span class="sSMXU">  --version</span><span class="s6sc0"> v1.8.2
</span></span></code><!--]--></pre><p><!--[-->helm3 이 활성화된 상태에서 위 명령들을 입력하여 cert-manager CRD 및 관련 챠트를 설치합니다. 그다음 letsencrypt cluster issuer를 설치합니다.<!--]--></p><pre class="language-yaml shiki shiki-themes github-dark-dimmed" style=""><!--[--><code><span class="line" line="1"><span class="sZQDN">apiVersion</span><span class="szrzo">: </span><span class="s6sc0">cert-manager.io/v1
</span></span><span class="line" line="2"><span class="sZQDN">kind</span><span class="szrzo">: </span><span class="s6sc0">ClusterIssuer
</span></span><span class="line" line="3"><span class="sZQDN">metadata</span><span class="szrzo">:
</span></span><span class="line" line="4"><span class="sZQDN">  name</span><span class="szrzo">: </span><span class="s6sc0">letsencrypt-production
</span></span><span class="line" line="5"><span class="sZQDN">spec</span><span class="szrzo">:
</span></span><span class="line" line="6"><span class="sZQDN">  acme</span><span class="szrzo">:
</span></span><span class="line" line="7"><span class="sZQDN">    server</span><span class="szrzo">: </span><span class="s6sc0">https://acme-v02.api.letsencrypt.org/directory
</span></span><span class="line" line="8"><span class="sZQDN">    email</span><span class="szrzo">: </span><span class="s6sc0">yourname@example.com
</span></span><span class="line" line="9"><span class="sca0q">    # Name of a secret used to store the ACME account private key
</span></span><span class="line" line="10"><span class="sZQDN">    privateKeySecretRef</span><span class="szrzo">:
</span></span><span class="line" line="11"><span class="sZQDN">      name</span><span class="szrzo">: </span><span class="s6sc0">letsencrypt-production
</span></span><span class="line" line="12"><span class="sZQDN">    solvers</span><span class="szrzo">:
</span></span><span class="line" line="13"><span class="szrzo">      - </span><span class="sZQDN">selector</span><span class="szrzo">: {}
</span></span><span class="line" line="14"><span class="sZQDN">        http01</span><span class="szrzo">:
</span></span><span class="line" line="15"><span class="sZQDN">          ingress</span><span class="szrzo">:
</span></span><span class="line" line="16"><span class="sZQDN">            class</span><span class="szrzo">: </span><span class="s6sc0">public
</span></span></code><!--]--></pre><p><!--[-->인터넷에 많이 올라온 자료에는 ingress class 를 <code><!--[-->ngnix<!--]--></code> 로 하라고 되어있지만 microk8s 에서는 public 이 사용된다고 합니다. 그런데 약간 시간이 지났는데도 ClusterIssuer 의 ready 상태가 <code><!--[-->False<!--]--></code> 인 채 바뀌지 않았습니다.<!--]--></p><p><!--[-->로그를 살펴보니 클러스터 안쪽 컨테이너에서 <code><!--[-->acme-v02.api.letsencrypt.org<!--]--></code> 도메인을 리졸브하지 못해서 ACME 어카운트가 생성되지 않고 있는 탓이었습니다.<!--]--></p><p><!--[-->coredns 는 처음부터 활성화해 두었지만 다시한번 살펴봅니다.<!--]--></p><pre class="language-text"><!--[--><code>$ microk8s enable dns
</code><!--]--></pre><p><!--[-->coredns 설정들은 기본적으로 cluster의 이름풀기를 우선하고, 호스트머신의 resolv.conf 를 honor 하도록 되어있습니다. 우분투머신의 이름풀기는 구글의 8.8.8.8, 8.8.4.4 를 바라보게 되어있었으므로 별다른 설정 없이 되어야 정상인데 그렇지 않은 이유를 한동안 이유를 알 수 없었습니다. 이걸 해결하려고 잘 알지도 못하는 calico를 만지작거리다가 클러스터를 한번 날려먹었습니다. (link: <a href="https://togomi.tistory.com/17" rel="nofollow"><!--[-->calico 완전히 삭제<!--]--></a>)<!--]--></p><p><!--[-->저는 아직 올린 서비스는 없었기 때문에 적당한 과거까지 지워버린다음 설치중 작성했던 yaml 파일들을 기억에 의존해 복기했는데 놀랍게도 빠른 시간안에 완벽히 복기해낼 수 있었습니다.<!--]--></p><p><!--[-->원인은 k8s가 쓰는 브릿지 네트워크까지 패킷이 도달하지 못하기 때문이었습니다. (최신 우분투 패키지의 기본값인지, 오라클 클라우드의 정책인지 알지 못합니다) NAT 안쪽까지 TCP/UDP 패킷이 드나들 수 있도록 iptables 설정을 바꿔줍니다<!--]--></p><pre class="language-bash shiki shiki-themes github-dark-dimmed" style=""><!--[--><code><span class="line" line="1"><span class="skFXu">iptables</span><span class="sSMXU"> -F
</span></span><span class="line" line="2"><span class="skFXu">iptables</span><span class="sSMXU"> -X
</span></span><span class="line" line="3"><span class="skFXu">iptables</span><span class="sSMXU"> -t</span><span class="s6sc0"> nat</span><span class="sSMXU"> -F
</span></span><span class="line" line="4"><span class="skFXu">iptables</span><span class="sSMXU"> -t</span><span class="s6sc0"> nat</span><span class="sSMXU"> -X
</span></span><span class="line" line="5"><span class="skFXu">iptables</span><span class="sSMXU"> -t</span><span class="s6sc0"> mangle</span><span class="sSMXU"> -F
</span></span><span class="line" line="6"><span class="skFXu">iptables</span><span class="sSMXU"> -t</span><span class="s6sc0"> mangle</span><span class="sSMXU"> -X
</span></span><span class="line" line="7"><span class="skFXu">iptables</span><span class="sSMXU"> -P</span><span class="s6sc0"> INPUT</span><span class="s6sc0"> ACCEPT
</span></span><span class="line" line="8"><span class="skFXu">iptables</span><span class="sSMXU"> -P</span><span class="s6sc0"> FORWARD</span><span class="s6sc0"> ACCEPT
</span></span><span class="line" line="9"><span class="skFXu">iptables</span><span class="sSMXU"> -P</span><span class="s6sc0"> OUTPUT</span><span class="s6sc0"> ACCEPT
</span></span></code><!--]--></pre><p><!--[-->이제 coredns가 재실행되도록 파드를 삭제합니다.<!--]--></p><pre class="language-bash shiki shiki-themes github-dark-dimmed" style=""><!--[--><code><span class="line" line="1"><span class="skFXu">$</span><span class="s6sc0"> kubectl</span><span class="s6sc0"> delete</span><span class="s6sc0"> pod</span><span class="s6sc0"> coredns-xxxxx-yyyyy
</span></span></code><!--]--></pre><p><!--[-->즉시 되살아나며 이제는 각 파드의 컨테이너 안에서 이름풀기가 문제없이 되는것을 확인합니다.<!--]--></p><p><!--[-->이제 샘플 웹서비스를 하나 외부에 노출시켜 SSL을 적용해보겠습니다.<!--]--></p><p><!--[-->microk8s 명령을 이용하여 필요한 서비스들을 설치합니다.<!--]--></p><pre class="language-bash shiki shiki-themes github-dark-dimmed" style=""><!--[--><code><span class="line" line="1"><span class="skFXu">$</span><span class="s6sc0"> microk8s</span><span class="s6sc0"> enable</span><span class="s6sc0"> ingress</span><span class="s6sc0"> metallb
</span></span></code><!--]--></pre><p><!--[-->microk8s 에서는 기본적으로 nginx-ingress 를 사용합니다. sudo 권한 없이 위 명령을 입력하는 것 만으로 호스트머신에 nginx가 설치되어 externalIPs 로 부터 받는 요청들을 k8s 클러스터 안쪽으로 전달해주는 것을 볼 수 있습니다. (와우 e 편한 세상 +_+) 다만, 로드벨런싱을 위해 matallb 를 설치하고 내부아이피의 일부를 할당했습니다<!--]--></p><p><!--[-->직접 아래와 같이 범위할당을 할 수도 있습니다.<!--]--></p><pre class="language-bash shiki shiki-themes github-dark-dimmed" style=""><!--[--><code><span class="line" line="1"><span class="skFXu">microk8s</span><span class="s6sc0"> enable</span><span class="s6sc0"> metallb:10.64.140.43-10.64.140.49
</span></span></code><!--]--></pre><p><!--[-->ingress service를 만들어 노출합니다.<!--]--></p><pre class="language-yaml shiki shiki-themes github-dark-dimmed" style=""><!--[--><code><span class="line" line="1"><span class="sZQDN">apiVersion</span><span class="szrzo">: </span><span class="s6sc0">v1
</span></span><span class="line" line="2"><span class="sZQDN">kind</span><span class="szrzo">: </span><span class="s6sc0">Service
</span></span><span class="line" line="3"><span class="sZQDN">metadata</span><span class="szrzo">:
</span></span><span class="line" line="4"><span class="sZQDN">  name</span><span class="szrzo">: </span><span class="s6sc0">ingress
</span></span><span class="line" line="5"><span class="sZQDN">  namespace</span><span class="szrzo">: </span><span class="s6sc0">ingress
</span></span><span class="line" line="6"><span class="sZQDN">spec</span><span class="szrzo">:
</span></span><span class="line" line="7"><span class="sZQDN">  selector</span><span class="szrzo">:
</span></span><span class="line" line="8"><span class="sZQDN">    name</span><span class="szrzo">: </span><span class="s6sc0">nginx-ingress-microk8s
</span></span><span class="line" line="9"><span class="sZQDN">  type</span><span class="szrzo">: </span><span class="s6sc0">LoadBalancer
</span></span><span class="line" line="10"><span class="sZQDN">  ports</span><span class="szrzo">:
</span></span><span class="line" line="11"><span class="szrzo">    - </span><span class="sZQDN">name</span><span class="szrzo">: </span><span class="s6sc0">http
</span></span><span class="line" line="12"><span class="sZQDN">      protocol</span><span class="szrzo">: </span><span class="s6sc0">TCP
</span></span><span class="line" line="13"><span class="sZQDN">      port</span><span class="szrzo">: </span><span class="sSMXU">80
</span></span><span class="line" line="14"><span class="sZQDN">      targetPort</span><span class="szrzo">: </span><span class="sSMXU">80
</span></span><span class="line" line="15"><span class="szrzo">    - </span><span class="sZQDN">name</span><span class="szrzo">: </span><span class="s6sc0">https
</span></span><span class="line" line="16"><span class="sZQDN">      protocol</span><span class="szrzo">: </span><span class="s6sc0">TCP
</span></span><span class="line" line="17"><span class="sZQDN">      port</span><span class="szrzo">: </span><span class="sSMXU">443
</span></span><span class="line" line="18"><span class="sZQDN">      targetPort</span><span class="szrzo">: </span><span class="sSMXU">443
</span></span></code><!--]--></pre><p><!--[-->준비는 끝났습니다. 이제 각 서비스용 ingress에 특별한 annotation 을 추가하는 것만으로 몇 분 안에 SSL을 적용할 수 있습니다.<!--]--></p><pre class="language-yaml shiki shiki-themes github-dark-dimmed" style=""><!--[--><code><span class="line" line="1"><span class="sZQDN">apiVersion</span><span class="szrzo">: </span><span class="s6sc0">networking.k8s.io/v1
</span></span><span class="line" line="2"><span class="sZQDN">kind</span><span class="szrzo">: </span><span class="s6sc0">Ingress
</span></span><span class="line" line="3"><span class="sZQDN">metadata</span><span class="szrzo">:
</span></span><span class="line" line="4"><span class="sZQDN">  name</span><span class="szrzo">: </span><span class="s6sc0">testweb
</span></span><span class="line" line="5"><span class="sZQDN">  annotations</span><span class="szrzo">:
</span></span><span class="line" line="6"><span class="sZQDN">    ingress.kubernetes.io/ssl-redirect</span><span class="szrzo">: </span><span class="s6sc0">&quot;true&quot;
</span></span><span class="line" line="7"><span class="sZQDN">    kubernetes.io/tls-acme</span><span class="szrzo">: </span><span class="s6sc0">&quot;true&quot;
</span></span><span class="line" line="8"><span class="sZQDN">    acme.cert-manager.io/http01-edit-in-place</span><span class="szrzo">: </span><span class="s6sc0">&quot;true&quot;
</span></span><span class="line" line="9"><span class="sZQDN">    cert-manager.io/cluster-issuer</span><span class="szrzo">: </span><span class="s6sc0">&quot;letsencrypt-production&quot;
</span></span><span class="line" line="10"><span class="sZQDN">spec</span><span class="szrzo">:
</span></span><span class="line" line="11"><span class="sZQDN">  tls</span><span class="szrzo">:
</span></span><span class="line" line="12"><span class="szrzo">    - </span><span class="sZQDN">hosts</span><span class="szrzo">:
</span></span><span class="line" line="13"><span class="szrzo">        - </span><span class="s6sc0">testweb.mydomain.com
</span></span><span class="line" line="14"><span class="sZQDN">      secretName</span><span class="szrzo">: </span><span class="s6sc0">&quot;letsencrypt-testweb&quot;</span><span class="sca0q"> # 적당한 이름을 작성하면 됨
</span></span><span class="line" line="15"><span class="sZQDN">  rules</span><span class="szrzo">:
</span></span><span class="line" line="16"><span class="szrzo">    - </span><span class="sZQDN">host</span><span class="szrzo">: </span><span class="s6sc0">testweb.mydomain.com
</span></span><span class="line" line="17"><span class="sZQDN">      http</span><span class="szrzo">:
</span></span><span class="line" line="18"><span class="sZQDN">        paths</span><span class="szrzo">:
</span></span><span class="line" line="19"><span class="szrzo">          - </span><span class="sZQDN">path</span><span class="szrzo">: </span><span class="s6sc0">/
</span></span><span class="line" line="20"><span class="sZQDN">            pathType</span><span class="szrzo">: </span><span class="s6sc0">Prefix
</span></span><span class="line" line="21"><span class="sZQDN">            backend</span><span class="szrzo">:
</span></span><span class="line" line="22"><span class="sZQDN">              service</span><span class="szrzo">:
</span></span><span class="line" line="23"><span class="sZQDN">                name</span><span class="szrzo">: </span><span class="s6sc0">testweb
</span></span><span class="line" line="24"><span class="sZQDN">                port</span><span class="szrzo">:
</span></span><span class="line" line="25"><span class="sZQDN">                  number</span><span class="szrzo">: </span><span class="sSMXU">80
</span></span></code><!--]--></pre><p><!--[--><code><!--[-->$ kubectl apply -f k8s/ingress.yaml<!--]--></code> 명령으로 적용하면 cert-manager가 cert-manager/certification 을 만들고 검증에 필요한 몇개의 pod와 ingress를 만들어 노출하는 것을 볼 수 있습니다. 잠시동안 <code><!--[-->http://testweb.mydomain.com/.well-known/acme-challenge/aaabbbccc...very.long.url<!--]--></code> 엔드포인트가 열립니다. 이는 ClusterIssuer의 solver 를 http01 로 지정했기 때문인데, 잠시 후 letsencrypt로부터 몇번의 http 요청이 들어오고 SSL 인증서 발급이 완료됩니다. 발급된 후에는 검증용 엔드포인트 및 관련 리소스들이 알아서 깨끗하게 해제됩니다.<!--]--></p><ul><!--[--><li><!--[--><code><!--[-->spec.tls.hosts<!--]--></code> 에 사용하고싶은 도메인을 나열하고 <code><!--[-->spec.tls.secretname<!--]--></code> 에 적당한 이름을 지정해줍니다. 이 이름의 secret 에 개인키가 저장됩니다.<!--]--></li><li><!--[--><code><!--[-->cert-manager.io/cluster-issuer: &quot;letsencrypt-production&quot;<!--]--></code> 여기에는 ClusterIssuer 를 만들 때 지정한 이름을 적어줍니다.<!--]--></li><li><!--[--><code><!--[-->acme.cert-manager.io/http01-edit-in-place: &quot;true&quot;<!--]--></code> annotation은 별도의 ingress 를 만들지 않고 이 Ingress 설정에 rules 를 추가해서 재사용하겠다는 의미인데, 호스트머신의 네트워크등 문제가 없다면 생략해도 됩니다.<!--]--></li><li><!--[--><code><!--[-->ingress.kubernetes.io/ssl-redirect: &quot;true&quot;<!--]--></code> annotation은 http 주소를 자동으로 https 로 리다이렉트 해달라는 의미입니다. (그럴일 없지만)http 를 병용한다면 제거해야 합니다.<!--]--></li><!--]--></ul><blockquote><!--[--><p><!--[-->사실 이번 과정에서는 제법 시행착오가 있었는데, 시간이 지난 후 기록을 남기는 과정에서 시행착오 부분의 에러 메시지들과 해결과정을 되살려 적을 수가 없어 모두 생략했습니다.<!--]--></p><!--]--></blockquote><style>html pre.shiki code .skFXu, html code.shiki .skFXu{--shiki-default:#F69D50}html pre.shiki code .s6sc0, html code.shiki .s6sc0{--shiki-default:#96D0FF}html pre.shiki code .sSMXU, html code.shiki .sSMXU{--shiki-default:#6CB6FF}html pre.shiki code .s3aqa, html code.shiki .s3aqa{--shiki-default:#F47067}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .sZQDN, html code.shiki .sZQDN{--shiki-default:#8DDB8C}html pre.shiki code .szrzo, html code.shiki .szrzo{--shiki-default:#ADBAC7}html pre.shiki code .sca0q, html code.shiki .sca0q{--shiki-default:#768390}</style></div></div></article><!--]--><footer><div class="container"> CopyRight © 2022 Changkyun Kim </div></footer></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__">[["ShallowReactive",1],{"prerenderedAt":2,"data":3,"state":982,"once":984,"_errors":985,"serverRendered":975,"path":976},1742875105204,["ShallowReactive",4],{"$gA87qiXR3y":5},{"id":6,"title":7,"body":8,"coverImage":970,"createdAt":971,"description":972,"extension":973,"meta":974,"navigation":975,"path":976,"seo":977,"stem":978,"tags":979},"blog/blog/2022-07/07-cert-manager.md","microk8s 에서 letsencrypt 인증서 사용하기",{"type":9,"value":10,"toc":968},"minimal",[11,22,25,143,146,300,311,318,321,329,338,341,344,442,445,465,468,471,474,495,498,501,516,519,686,689,916,926,958,964],[12,13,14,21],"p",{},[15,16,20],"a",{"href":17,"rel":18},"https://changkyun.kim/article/2022-05/12-free-k8s-cluster-on-oracle-cloud",[19],"nofollow","오라클 프리티어 클라우드에 무료 k8s 클러스터 만들기"," 에 이어, k8s에 올리는 웹서비스들에 letsencrypt 인증서를 사용하는 과정을 진행했습니다.",[12,23,24],{},"보통 nginx 라면 certbot 등을 이용하면 되겠지만, k8s 에서는 cert-manager 를 이용해야만 합니다.",[26,27,32],"pre",{"className":28,"code":29,"language":30,"meta":31,"style":31},"language-bash shiki shiki-themes github-dark-dimmed","$ helm repo add jetstack https://charts.jetstack.io\n$ helm repo update\n$ kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.8.2/cert-manager.crds.yaml\n$ helm install \\\n  cert-manager jetstack/cert-manager \\\n  --namespace cert-manager \\\n  --create-namespace \\\n  --version v1.8.2\n","bash","",[33,34,35,60,72,90,104,115,126,134],"code",{"__ignoreMap":31},[36,37,40,44,48,51,54,57],"span",{"class":38,"line":39},"line",1,[36,41,43],{"class":42},"skFXu","$",[36,45,47],{"class":46},"s6sc0"," helm",[36,49,50],{"class":46}," repo",[36,52,53],{"class":46}," add",[36,55,56],{"class":46}," jetstack",[36,58,59],{"class":46}," https://charts.jetstack.io\n",[36,61,63,65,67,69],{"class":38,"line":62},2,[36,64,43],{"class":42},[36,66,47],{"class":46},[36,68,50],{"class":46},[36,70,71],{"class":46}," update\n",[36,73,75,77,80,83,87],{"class":38,"line":74},3,[36,76,43],{"class":42},[36,78,79],{"class":46}," kubectl",[36,81,82],{"class":46}," apply",[36,84,86],{"class":85},"sSMXU"," -f",[36,88,89],{"class":46}," https://github.com/cert-manager/cert-manager/releases/download/v1.8.2/cert-manager.crds.yaml\n",[36,91,93,95,97,100],{"class":38,"line":92},4,[36,94,43],{"class":42},[36,96,47],{"class":46},[36,98,99],{"class":46}," install",[36,101,103],{"class":102},"s3aqa"," \\\n",[36,105,107,110,113],{"class":38,"line":106},5,[36,108,109],{"class":46},"  cert-manager",[36,111,112],{"class":46}," jetstack/cert-manager",[36,114,103],{"class":102},[36,116,118,121,124],{"class":38,"line":117},6,[36,119,120],{"class":85},"  --namespace",[36,122,123],{"class":46}," cert-manager",[36,125,103],{"class":102},[36,127,129,132],{"class":38,"line":128},7,[36,130,131],{"class":85},"  --create-namespace",[36,133,103],{"class":102},[36,135,137,140],{"class":38,"line":136},8,[36,138,139],{"class":85},"  --version",[36,141,142],{"class":46}," v1.8.2\n",[12,144,145],{},"helm3 이 활성화된 상태에서 위 명령들을 입력하여 cert-manager CRD 및 관련 챠트를 설치합니다. 그다음 letsencrypt cluster issuer를 설치합니다.",[26,147,151],{"className":148,"code":149,"language":150,"meta":31,"style":31},"language-yaml shiki shiki-themes github-dark-dimmed","apiVersion: cert-manager.io/v1\nkind: ClusterIssuer\nmetadata:\n  name: letsencrypt-production\nspec:\n  acme:\n    server: https://acme-v02.api.letsencrypt.org/directory\n    email: yourname@example.com\n    # Name of a secret used to store the ACME account private key\n    privateKeySecretRef:\n      name: letsencrypt-production\n    solvers:\n      - selector: {}\n        http01:\n          ingress:\n            class: public\n","yaml",[33,152,153,166,176,184,194,201,208,218,228,235,243,253,261,273,281,289],{"__ignoreMap":31},[36,154,155,159,163],{"class":38,"line":39},[36,156,158],{"class":157},"sZQDN","apiVersion",[36,160,162],{"class":161},"szrzo",": ",[36,164,165],{"class":46},"cert-manager.io/v1\n",[36,167,168,171,173],{"class":38,"line":62},[36,169,170],{"class":157},"kind",[36,172,162],{"class":161},[36,174,175],{"class":46},"ClusterIssuer\n",[36,177,178,181],{"class":38,"line":74},[36,179,180],{"class":157},"metadata",[36,182,183],{"class":161},":\n",[36,185,186,189,191],{"class":38,"line":92},[36,187,188],{"class":157},"  name",[36,190,162],{"class":161},[36,192,193],{"class":46},"letsencrypt-production\n",[36,195,196,199],{"class":38,"line":106},[36,197,198],{"class":157},"spec",[36,200,183],{"class":161},[36,202,203,206],{"class":38,"line":117},[36,204,205],{"class":157},"  acme",[36,207,183],{"class":161},[36,209,210,213,215],{"class":38,"line":128},[36,211,212],{"class":157},"    server",[36,214,162],{"class":161},[36,216,217],{"class":46},"https://acme-v02.api.letsencrypt.org/directory\n",[36,219,220,223,225],{"class":38,"line":136},[36,221,222],{"class":157},"    email",[36,224,162],{"class":161},[36,226,227],{"class":46},"yourname@example.com\n",[36,229,231],{"class":38,"line":230},9,[36,232,234],{"class":233},"sca0q","    # Name of a secret used to store the ACME account private key\n",[36,236,238,241],{"class":38,"line":237},10,[36,239,240],{"class":157},"    privateKeySecretRef",[36,242,183],{"class":161},[36,244,246,249,251],{"class":38,"line":245},11,[36,247,248],{"class":157},"      name",[36,250,162],{"class":161},[36,252,193],{"class":46},[36,254,256,259],{"class":38,"line":255},12,[36,257,258],{"class":157},"    solvers",[36,260,183],{"class":161},[36,262,264,267,270],{"class":38,"line":263},13,[36,265,266],{"class":161},"      - ",[36,268,269],{"class":157},"selector",[36,271,272],{"class":161},": {}\n",[36,274,276,279],{"class":38,"line":275},14,[36,277,278],{"class":157},"        http01",[36,280,183],{"class":161},[36,282,284,287],{"class":38,"line":283},15,[36,285,286],{"class":157},"          ingress",[36,288,183],{"class":161},[36,290,292,295,297],{"class":38,"line":291},16,[36,293,294],{"class":157},"            class",[36,296,162],{"class":161},[36,298,299],{"class":46},"public\n",[12,301,302,303,306,307,310],{},"인터넷에 많이 올라온 자료에는 ingress class 를 ",[33,304,305],{},"ngnix"," 로 하라고 되어있지만 microk8s 에서는 public 이 사용된다고 합니다. 그런데 약간 시간이 지났는데도 ClusterIssuer 의 ready 상태가 ",[33,308,309],{},"False"," 인 채 바뀌지 않았습니다.",[12,312,313,314,317],{},"로그를 살펴보니 클러스터 안쪽 컨테이너에서 ",[33,315,316],{},"acme-v02.api.letsencrypt.org"," 도메인을 리졸브하지 못해서 ACME 어카운트가 생성되지 않고 있는 탓이었습니다.",[12,319,320],{},"coredns 는 처음부터 활성화해 두었지만 다시한번 살펴봅니다.",[26,322,327],{"className":323,"code":325,"language":326,"meta":31},[324],"language-text","$ microk8s enable dns\n","text",[33,328,325],{"__ignoreMap":31},[12,330,331,332,337],{},"coredns 설정들은 기본적으로 cluster의 이름풀기를 우선하고, 호스트머신의 resolv.conf 를 honor 하도록 되어있습니다. 우분투머신의 이름풀기는 구글의 8.8.8.8, 8.8.4.4 를 바라보게 되어있었으므로 별다른 설정 없이 되어야 정상인데 그렇지 않은 이유를 한동안 이유를 알 수 없었습니다. 이걸 해결하려고 잘 알지도 못하는 calico를 만지작거리다가 클러스터를 한번 날려먹었습니다. (link: ",[15,333,336],{"href":334,"rel":335},"https://togomi.tistory.com/17",[19],"calico 완전히 삭제",")",[12,339,340],{},"저는 아직 올린 서비스는 없었기 때문에 적당한 과거까지 지워버린다음 설치중 작성했던 yaml 파일들을 기억에 의존해 복기했는데 놀랍게도 빠른 시간안에 완벽히 복기해낼 수 있었습니다.",[12,342,343],{},"원인은 k8s가 쓰는 브릿지 네트워크까지 패킷이 도달하지 못하기 때문이었습니다. (최신 우분투 패키지의 기본값인지, 오라클 클라우드의 정책인지 알지 못합니다) NAT 안쪽까지 TCP/UDP 패킷이 드나들 수 있도록 iptables 설정을 바꿔줍니다",[26,345,347],{"className":28,"code":346,"language":30,"meta":31,"style":31},"iptables -F\niptables -X\niptables -t nat -F\niptables -t nat -X\niptables -t mangle -F\niptables -t mangle -X\niptables -P INPUT ACCEPT\niptables -P FORWARD ACCEPT\niptables -P OUTPUT ACCEPT\n",[33,348,349,357,364,376,386,397,407,420,431],{"__ignoreMap":31},[36,350,351,354],{"class":38,"line":39},[36,352,353],{"class":42},"iptables",[36,355,356],{"class":85}," -F\n",[36,358,359,361],{"class":38,"line":62},[36,360,353],{"class":42},[36,362,363],{"class":85}," -X\n",[36,365,366,368,371,374],{"class":38,"line":74},[36,367,353],{"class":42},[36,369,370],{"class":85}," -t",[36,372,373],{"class":46}," nat",[36,375,356],{"class":85},[36,377,378,380,382,384],{"class":38,"line":92},[36,379,353],{"class":42},[36,381,370],{"class":85},[36,383,373],{"class":46},[36,385,363],{"class":85},[36,387,388,390,392,395],{"class":38,"line":106},[36,389,353],{"class":42},[36,391,370],{"class":85},[36,393,394],{"class":46}," mangle",[36,396,356],{"class":85},[36,398,399,401,403,405],{"class":38,"line":117},[36,400,353],{"class":42},[36,402,370],{"class":85},[36,404,394],{"class":46},[36,406,363],{"class":85},[36,408,409,411,414,417],{"class":38,"line":128},[36,410,353],{"class":42},[36,412,413],{"class":85}," -P",[36,415,416],{"class":46}," INPUT",[36,418,419],{"class":46}," ACCEPT\n",[36,421,422,424,426,429],{"class":38,"line":136},[36,423,353],{"class":42},[36,425,413],{"class":85},[36,427,428],{"class":46}," FORWARD",[36,430,419],{"class":46},[36,432,433,435,437,440],{"class":38,"line":230},[36,434,353],{"class":42},[36,436,413],{"class":85},[36,438,439],{"class":46}," OUTPUT",[36,441,419],{"class":46},[12,443,444],{},"이제 coredns가 재실행되도록 파드를 삭제합니다.",[26,446,448],{"className":28,"code":447,"language":30,"meta":31,"style":31},"$ kubectl delete pod coredns-xxxxx-yyyyy\n",[33,449,450],{"__ignoreMap":31},[36,451,452,454,456,459,462],{"class":38,"line":39},[36,453,43],{"class":42},[36,455,79],{"class":46},[36,457,458],{"class":46}," delete",[36,460,461],{"class":46}," pod",[36,463,464],{"class":46}," coredns-xxxxx-yyyyy\n",[12,466,467],{},"즉시 되살아나며 이제는 각 파드의 컨테이너 안에서 이름풀기가 문제없이 되는것을 확인합니다.",[12,469,470],{},"이제 샘플 웹서비스를 하나 외부에 노출시켜 SSL을 적용해보겠습니다.",[12,472,473],{},"microk8s 명령을 이용하여 필요한 서비스들을 설치합니다.",[26,475,477],{"className":28,"code":476,"language":30,"meta":31,"style":31},"$ microk8s enable ingress metallb\n",[33,478,479],{"__ignoreMap":31},[36,480,481,483,486,489,492],{"class":38,"line":39},[36,482,43],{"class":42},[36,484,485],{"class":46}," microk8s",[36,487,488],{"class":46}," enable",[36,490,491],{"class":46}," ingress",[36,493,494],{"class":46}," metallb\n",[12,496,497],{},"microk8s 에서는 기본적으로 nginx-ingress 를 사용합니다. sudo 권한 없이 위 명령을 입력하는 것 만으로 호스트머신에 nginx가 설치되어 externalIPs 로 부터 받는 요청들을 k8s 클러스터 안쪽으로 전달해주는 것을 볼 수 있습니다. (와우 e 편한 세상 +_+) 다만, 로드벨런싱을 위해 matallb 를 설치하고 내부아이피의 일부를 할당했습니다",[12,499,500],{},"직접 아래와 같이 범위할당을 할 수도 있습니다.",[26,502,504],{"className":28,"code":503,"language":30,"meta":31,"style":31},"microk8s enable metallb:10.64.140.43-10.64.140.49\n",[33,505,506],{"__ignoreMap":31},[36,507,508,511,513],{"class":38,"line":39},[36,509,510],{"class":42},"microk8s",[36,512,488],{"class":46},[36,514,515],{"class":46}," metallb:10.64.140.43-10.64.140.49\n",[12,517,518],{},"ingress service를 만들어 노출합니다.",[26,520,522],{"className":148,"code":521,"language":150,"meta":31,"style":31},"apiVersion: v1\nkind: Service\nmetadata:\n  name: ingress\n  namespace: ingress\nspec:\n  selector:\n    name: nginx-ingress-microk8s\n  type: LoadBalancer\n  ports:\n    - name: http\n      protocol: TCP\n      port: 80\n      targetPort: 80\n    - name: https\n      protocol: TCP\n      port: 443\n      targetPort: 443\n",[33,523,524,533,542,548,557,566,572,579,589,599,606,619,629,639,648,659,667,677],{"__ignoreMap":31},[36,525,526,528,530],{"class":38,"line":39},[36,527,158],{"class":157},[36,529,162],{"class":161},[36,531,532],{"class":46},"v1\n",[36,534,535,537,539],{"class":38,"line":62},[36,536,170],{"class":157},[36,538,162],{"class":161},[36,540,541],{"class":46},"Service\n",[36,543,544,546],{"class":38,"line":74},[36,545,180],{"class":157},[36,547,183],{"class":161},[36,549,550,552,554],{"class":38,"line":92},[36,551,188],{"class":157},[36,553,162],{"class":161},[36,555,556],{"class":46},"ingress\n",[36,558,559,562,564],{"class":38,"line":106},[36,560,561],{"class":157},"  namespace",[36,563,162],{"class":161},[36,565,556],{"class":46},[36,567,568,570],{"class":38,"line":117},[36,569,198],{"class":157},[36,571,183],{"class":161},[36,573,574,577],{"class":38,"line":128},[36,575,576],{"class":157},"  selector",[36,578,183],{"class":161},[36,580,581,584,586],{"class":38,"line":136},[36,582,583],{"class":157},"    name",[36,585,162],{"class":161},[36,587,588],{"class":46},"nginx-ingress-microk8s\n",[36,590,591,594,596],{"class":38,"line":230},[36,592,593],{"class":157},"  type",[36,595,162],{"class":161},[36,597,598],{"class":46},"LoadBalancer\n",[36,600,601,604],{"class":38,"line":237},[36,602,603],{"class":157},"  ports",[36,605,183],{"class":161},[36,607,608,611,614,616],{"class":38,"line":245},[36,609,610],{"class":161},"    - ",[36,612,613],{"class":157},"name",[36,615,162],{"class":161},[36,617,618],{"class":46},"http\n",[36,620,621,624,626],{"class":38,"line":255},[36,622,623],{"class":157},"      protocol",[36,625,162],{"class":161},[36,627,628],{"class":46},"TCP\n",[36,630,631,634,636],{"class":38,"line":263},[36,632,633],{"class":157},"      port",[36,635,162],{"class":161},[36,637,638],{"class":85},"80\n",[36,640,641,644,646],{"class":38,"line":275},[36,642,643],{"class":157},"      targetPort",[36,645,162],{"class":161},[36,647,638],{"class":85},[36,649,650,652,654,656],{"class":38,"line":283},[36,651,610],{"class":161},[36,653,613],{"class":157},[36,655,162],{"class":161},[36,657,658],{"class":46},"https\n",[36,660,661,663,665],{"class":38,"line":291},[36,662,623],{"class":157},[36,664,162],{"class":161},[36,666,628],{"class":46},[36,668,670,672,674],{"class":38,"line":669},17,[36,671,633],{"class":157},[36,673,162],{"class":161},[36,675,676],{"class":85},"443\n",[36,678,680,682,684],{"class":38,"line":679},18,[36,681,643],{"class":157},[36,683,162],{"class":161},[36,685,676],{"class":85},[12,687,688],{},"준비는 끝났습니다. 이제 각 서비스용 ingress에 특별한 annotation 을 추가하는 것만으로 몇 분 안에 SSL을 적용할 수 있습니다.",[26,690,692],{"className":148,"code":691,"language":150,"meta":31,"style":31},"apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: testweb\n  annotations:\n    ingress.kubernetes.io/ssl-redirect: \"true\"\n    kubernetes.io/tls-acme: \"true\"\n    acme.cert-manager.io/http01-edit-in-place: \"true\"\n    cert-manager.io/cluster-issuer: \"letsencrypt-production\"\nspec:\n  tls:\n    - hosts:\n        - testweb.mydomain.com\n      secretName: \"letsencrypt-testweb\" # 적당한 이름을 작성하면 됨\n  rules:\n    - host: testweb.mydomain.com\n      http:\n        paths:\n          - path: /\n            pathType: Prefix\n            backend:\n              service:\n                name: testweb\n                port:\n                  number: 80\n",[33,693,694,703,712,718,727,734,744,753,762,772,778,785,794,802,815,822,833,840,847,861,872,880,888,898,906],{"__ignoreMap":31},[36,695,696,698,700],{"class":38,"line":39},[36,697,158],{"class":157},[36,699,162],{"class":161},[36,701,702],{"class":46},"networking.k8s.io/v1\n",[36,704,705,707,709],{"class":38,"line":62},[36,706,170],{"class":157},[36,708,162],{"class":161},[36,710,711],{"class":46},"Ingress\n",[36,713,714,716],{"class":38,"line":74},[36,715,180],{"class":157},[36,717,183],{"class":161},[36,719,720,722,724],{"class":38,"line":92},[36,721,188],{"class":157},[36,723,162],{"class":161},[36,725,726],{"class":46},"testweb\n",[36,728,729,732],{"class":38,"line":106},[36,730,731],{"class":157},"  annotations",[36,733,183],{"class":161},[36,735,736,739,741],{"class":38,"line":117},[36,737,738],{"class":157},"    ingress.kubernetes.io/ssl-redirect",[36,740,162],{"class":161},[36,742,743],{"class":46},"\"true\"\n",[36,745,746,749,751],{"class":38,"line":128},[36,747,748],{"class":157},"    kubernetes.io/tls-acme",[36,750,162],{"class":161},[36,752,743],{"class":46},[36,754,755,758,760],{"class":38,"line":136},[36,756,757],{"class":157},"    acme.cert-manager.io/http01-edit-in-place",[36,759,162],{"class":161},[36,761,743],{"class":46},[36,763,764,767,769],{"class":38,"line":230},[36,765,766],{"class":157},"    cert-manager.io/cluster-issuer",[36,768,162],{"class":161},[36,770,771],{"class":46},"\"letsencrypt-production\"\n",[36,773,774,776],{"class":38,"line":237},[36,775,198],{"class":157},[36,777,183],{"class":161},[36,779,780,783],{"class":38,"line":245},[36,781,782],{"class":157},"  tls",[36,784,183],{"class":161},[36,786,787,789,792],{"class":38,"line":255},[36,788,610],{"class":161},[36,790,791],{"class":157},"hosts",[36,793,183],{"class":161},[36,795,796,799],{"class":38,"line":263},[36,797,798],{"class":161},"        - ",[36,800,801],{"class":46},"testweb.mydomain.com\n",[36,803,804,807,809,812],{"class":38,"line":275},[36,805,806],{"class":157},"      secretName",[36,808,162],{"class":161},[36,810,811],{"class":46},"\"letsencrypt-testweb\"",[36,813,814],{"class":233}," # 적당한 이름을 작성하면 됨\n",[36,816,817,820],{"class":38,"line":283},[36,818,819],{"class":157},"  rules",[36,821,183],{"class":161},[36,823,824,826,829,831],{"class":38,"line":291},[36,825,610],{"class":161},[36,827,828],{"class":157},"host",[36,830,162],{"class":161},[36,832,801],{"class":46},[36,834,835,838],{"class":38,"line":669},[36,836,837],{"class":157},"      http",[36,839,183],{"class":161},[36,841,842,845],{"class":38,"line":679},[36,843,844],{"class":157},"        paths",[36,846,183],{"class":161},[36,848,850,853,856,858],{"class":38,"line":849},19,[36,851,852],{"class":161},"          - ",[36,854,855],{"class":157},"path",[36,857,162],{"class":161},[36,859,860],{"class":46},"/\n",[36,862,864,867,869],{"class":38,"line":863},20,[36,865,866],{"class":157},"            pathType",[36,868,162],{"class":161},[36,870,871],{"class":46},"Prefix\n",[36,873,875,878],{"class":38,"line":874},21,[36,876,877],{"class":157},"            backend",[36,879,183],{"class":161},[36,881,883,886],{"class":38,"line":882},22,[36,884,885],{"class":157},"              service",[36,887,183],{"class":161},[36,889,891,894,896],{"class":38,"line":890},23,[36,892,893],{"class":157},"                name",[36,895,162],{"class":161},[36,897,726],{"class":46},[36,899,901,904],{"class":38,"line":900},24,[36,902,903],{"class":157},"                port",[36,905,183],{"class":161},[36,907,909,912,914],{"class":38,"line":908},25,[36,910,911],{"class":157},"                  number",[36,913,162],{"class":161},[36,915,638],{"class":85},[12,917,918,921,922,925],{},[33,919,920],{},"$ kubectl apply -f k8s/ingress.yaml"," 명령으로 적용하면 cert-manager가 cert-manager/certification 을 만들고 검증에 필요한 몇개의 pod와 ingress를 만들어 노출하는 것을 볼 수 있습니다. 잠시동안 ",[33,923,924],{},"http://testweb.mydomain.com/.well-known/acme-challenge/aaabbbccc...very.long.url"," 엔드포인트가 열립니다. 이는 ClusterIssuer의 solver 를 http01 로 지정했기 때문인데, 잠시 후 letsencrypt로부터 몇번의 http 요청이 들어오고 SSL 인증서 발급이 완료됩니다. 발급된 후에는 검증용 엔드포인트 및 관련 리소스들이 알아서 깨끗하게 해제됩니다.",[927,928,929,940,946,952],"ul",{},[930,931,932,935,936,939],"li",{},[33,933,934],{},"spec.tls.hosts"," 에 사용하고싶은 도메인을 나열하고 ",[33,937,938],{},"spec.tls.secretname"," 에 적당한 이름을 지정해줍니다. 이 이름의 secret 에 개인키가 저장됩니다.",[930,941,942,945],{},[33,943,944],{},"cert-manager.io/cluster-issuer: \"letsencrypt-production\""," 여기에는 ClusterIssuer 를 만들 때 지정한 이름을 적어줍니다.",[930,947,948,951],{},[33,949,950],{},"acme.cert-manager.io/http01-edit-in-place: \"true\""," annotation은 별도의 ingress 를 만들지 않고 이 Ingress 설정에 rules 를 추가해서 재사용하겠다는 의미인데, 호스트머신의 네트워크등 문제가 없다면 생략해도 됩니다.",[930,953,954,957],{},[33,955,956],{},"ingress.kubernetes.io/ssl-redirect: \"true\""," annotation은 http 주소를 자동으로 https 로 리다이렉트 해달라는 의미입니다. (그럴일 없지만)http 를 병용한다면 제거해야 합니다.",[959,960,961],"blockquote",{},[12,962,963],{},"사실 이번 과정에서는 제법 시행착오가 있었는데, 시간이 지난 후 기록을 남기는 과정에서 시행착오 부분의 에러 메시지들과 해결과정을 되살려 적을 수가 없어 모두 생략했습니다.",[965,966,967],"style",{},"html pre.shiki code .skFXu, html code.shiki .skFXu{--shiki-default:#F69D50}html pre.shiki code .s6sc0, html code.shiki .s6sc0{--shiki-default:#96D0FF}html pre.shiki code .sSMXU, html code.shiki .sSMXU{--shiki-default:#6CB6FF}html pre.shiki code .s3aqa, html code.shiki .s3aqa{--shiki-default:#F47067}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .sZQDN, html code.shiki .sZQDN{--shiki-default:#8DDB8C}html pre.shiki code .szrzo, html code.shiki .szrzo{--shiki-default:#ADBAC7}html pre.shiki code .sca0q, html code.shiki .sca0q{--shiki-default:#768390}",{"title":31,"searchDepth":62,"depth":62,"links":969},[],null,"2022-07-07T00:00:00.000Z","오라클 프리티어 클라우드에 무료 k8s 클러스터 만들기 에 이어, k8s에 올리는 웹서비스들에 letsencrypt 인증서를 사용하는 과정을 진행했습니다.","md",{},true,"/blog/2022-07/07-cert-manager",{"title":7,"description":972},"blog/2022-07/07-cert-manager",[980,981,510],"oracle cloud","k8s",["Reactive",983],{},["Set"],["ShallowReactive",986],{"$gA87qiXR3y":970}]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}}},app:{baseURL:"/",buildId:"81dd48f5-054f-4fcb-90d6-55c08acaf384",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>